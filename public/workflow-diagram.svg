<svg width="900" height="650" viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
    <!-- Styles -->
    <style>
        .box { fill: hsl(var(--card)); stroke: hsl(var(--border)); stroke-width: 2; rx: 8; }
        .title-text { font-family: Arial, Helvetica, sans-serif; font-size: 18px; font-weight: bold; fill: hsl(var(--foreground)); text-anchor: middle; }
        .desc-text { font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: hsl(var(--muted-foreground)); text-anchor: middle; }
        .arrow-line { stroke: hsl(var(--primary)); stroke-width: 2.5; marker-end: url(#arrowhead); }
        .arrow-text { font-family: Arial, Helvetica, sans-serif; font-size: 13px; fill: hsl(var(--foreground)); text-anchor: middle; }
        .layer-label { font-family: Arial, Helvetica, sans-serif; font-size: 20px; font-weight: bold; fill: hsl(var(--primary)); text-anchor: middle; }
    </style>

    <!-- Arrowhead Definition -->
    <defs>
        <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="hsl(var(--primary))" />
        </marker>
    </defs>

    <!-- Layer Titles -->
    <text x="450" y="30" class="layer-label">Kisan Salahkaar - Application Workflow</text>
    
    <!-- Column 1: Frontend -->
    <rect x="50" y="80" width="200" height="150" class="box" />
    <text x="150" y="110" class="title-text">1. Frontend</text>
    <text x="150" y="135" class="desc-text">(User's Browser)</text>
    <text x="150" y="165" class="desc-text">Next.js &amp; React Components</text>
    <text x="150" y="185" class="desc-text">User clicks a button like</text>
    <text x="150" y="205" class="desc-text">"Get Recommendations"</text>

    <!-- Column 2: Server Actions -->
    <rect x="350" y="250" width="200" height="150" class="box" />
    <text x="450" y="280" class="title-text">2. Server Actions</text>
    <text x="450" y="305" class="desc-text">(Secure Backend Bridge)</text>
    <text x="450" y="335" class="desc-text">`handle...` function is called</text>
    <text x="450" y="355" class="desc-text">Runs on the server, not</text>
    <text x="450" y="375" class="desc-text">in the browser</text>

    <!-- Column 3: Genkit AI Flows -->
    <rect x="650" y="420" width="200" height="150" class="box" />
    <text x="750" y="450" class="title-text">3. AI Flows</text>
    <text x="750" y="475" class="desc-text">(The AI "Brain")</text>
    <text x="750" y="505" class="desc-text">Genkit Flow is executed</text>
    <text x="750" y="525" class="desc-text">Calls Gemini with a</text>
    <text x="750" y="545" class="desc-text">structured prompt</text>

    <!-- Arrows -->
    <!-- Frontend -> Server Actions -->
    <path d="M 250 155 C 300 155, 300 250, 350 325" fill="none" class="arrow-line" />
    <text x="325" y="220" class="arrow-text">User Action Triggers</text>
    <text x="325" y="238" class="arrow-text">Server Action</text>

    <!-- Server Actions -> AI Flows -->
    <path d="M 550 325 C 600 325, 600 420, 650 495" fill="none" class="arrow-line" />
    <text x="625" y="390" class="arrow-text">Action Calls</text>
    <text x="625" y="408" class="arrow-text">Genkit Flow</text>

    <!-- AI Flows -> Server Actions (Return) -->
    <path d="M 750 420 Q 750 350 550 350" fill="none" class="arrow-line" />
    <text x="650" y="365" class="arrow-text">AI Returns</text>
    <text x="650" y="383" class="arrow-text">Structured Data</text>

    <!-- Server Actions -> Frontend (Return) -->
    <path d="M 450 250 Q 450 180 250 180" fill="none" class="arrow-line" />
    <text x="350" y="195" class="arrow-text">Server Returns</text>
    <text x="350" y="213" class="arrow-text">Final Result</text>

</svg>
